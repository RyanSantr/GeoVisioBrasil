<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="description" content="Sistema avançado de monitoramento de biomas brasileiros por satélite em tempo real">
  <title>GeoVision Brasil - Monitoramento de Biomas</title>
  
  <!-- CSS Externo -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@2.0.0/Control.FullScreen.min.css">

  <!-- CSS Interno -->
  <style>
    :root {
      --amazonia: #1a5e1a;
      --cerrado: #b38b4f;
      --mata-atlantica: #3a7d3a;
      --caatinga: #d9a441;
      --pantanal: #5f9ea0;
      --pampa: #8fbc8f;
      --amazonia-light: rgba(26, 94, 26, 0.2);
      --cerrado-light: rgba(179, 139, 79, 0.2);
      --mata-atlantica-light: rgba(58, 125, 58, 0.2);
      --caatinga-light: rgba(217, 164, 65, 0.2);
      --pantanal-light: rgba(95, 158, 160, 0.2);
      --pampa-light: rgba(143, 188, 143, 0.2);
      --primary: #2A7F62;
      --secondary: #3AAE84;
      --accent: #FFD166;
      --dark: #1A3A32;
      --light: #F7F9F8;
      --text: #333333;
      --error: #e53935;
      --warning: #fb8c00;
      --primary-gradient: linear-gradient(135deg, #2A7F62 0%, #3AAE84 100%);
      --secondary-gradient: linear-gradient(135deg, #1A3A32 0%, #2A7F62 100%);
      --card-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      --card-hover-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #f8f9fa;
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    header {
      background: var(--secondary-gradient);
      color: white;
      padding: 1.2rem 0;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
      width: 100%;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1.5rem;
    }
    
    h1, h2, h3, h4 {
      font-weight: 700;
      margin-bottom: 1rem;
      line-height: 1.2;
    }
    
    h1 {
      font-size: clamp(1.5rem, 4vw, 2.2rem);
      background: linear-gradient(to right, #FFF 0%, var(--accent) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    h2 {
      font-size: clamp(1.25rem, 3vw, 1.8rem);
      color: var(--primary);
    }
    
    h3 {
      font-size: clamp(1.1rem, 2.5vw, 1.4rem);
      color: var(--dark);
    }
    
    h1 i, h2 i {
      margin-right: 10px;
      color: var(--accent);
    }
    
    nav ul {
      display: flex;
      list-style: none;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    nav a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 0.5rem;
      border-radius: 6px;
    }
    
    nav a:hover, nav a:focus {
      color: var(--accent);
      background-color: rgba(255, 255, 255, 0.1);
      outline: none;
    }
    
    .tagline {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 400;
      margin-top: -0.5rem;
    }
    
    .map-section {
      padding: 2rem 0;
      flex: 1;
    }
    
    .section-title {
      display: flex;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .map-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 1.5rem;
      background: white;
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      transition: all 0.3s ease;
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .map-controls:hover {
      box-shadow: var(--card-hover-shadow);
    }
    
    .control-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }
    
    .select-wrapper {
      position: relative;
      min-width: 200px;
    }
    
    .select-wrapper i {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      color: #666;
    }
    
    .map-controls select, .map-controls button {
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
      background-color: white;
      font-family: inherit;
      font-size: 0.95rem;
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      appearance: none;
      width: 100%;
    }
    
    .map-controls select {
      padding-right: 2.5rem;
    }
    
    .map-controls select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(42, 127, 98, 0.2);
    }
    
    .map-controls button {
      background: var(--primary-gradient);
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-width: max-content;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(42, 127, 98, 0.2);
    }
    
    .map-controls button:hover {
      background: var(--secondary);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(42, 127, 98, 0.3);
    }
    
    .map-controls button:active {
      transform: translateY(0);
    }
    
    .map-controls button:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
    
    .map-controls button.secondary {
      background: white;
      color: var(--dark);
      border: 1px solid #e0e0e0;
      box-shadow: none;
    }
    
    .map-controls button.secondary:hover {
      background: #f5f5f5;
    }
    
    #map-container {
      position: relative;
      height: 750px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0,0,0,0.1);
      border: none;
    }
    
    #map {
      height: 100%;
      width: 100%;
    }
    
    .map-overlay {
      position: absolute;
      z-index: 1000;
      background: rgba(255, 255, 255, 0.98);
      padding: 1.5rem;
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    
    .map-overlay:hover {
      box-shadow: var(--card-hover-shadow);
    }
    
    .map-legend {
      bottom: 20px;
      right: 20px;
      max-width: 280px;
    }
    
    .biome-info {
      top: 20px;
      left: 20px;
      max-width: 320px;
    }
    
    .satellite-info-panel {
      top: 20px;
      right: 20px;
      max-width: 300px;
      max-height: 70vh;
      overflow-y: auto;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      font-size: 0.85rem;
    }
    
    .legend-color {
      width: 20px;
      height: 20px;
      margin-right: 12px;
      border-radius: 4px;
      flex-shrink: 0;
    }
    
    .legend-color-circle {
      border-radius: 50%;
    }
    
    .biome-title {
      font-weight: 800;
      letter-spacing: 0.5px;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      display: inline-block;
      font-size: 1.1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .biome-description {
      margin-bottom: 1rem;
      font-size: 0.9rem;
      line-height: 1.5;
    }
    
    .biome-stats {
      margin-top: 1rem;
    }
    
    .biome-stat {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.6rem;
      font-size: 0.9rem;
      padding: 0.4rem 0;
      border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .biome-stat:last-child {
      border-bottom: none;
    }
    
    .biome-stat span:first-child {
      font-weight: 600;
      color: var(--dark);
    }
    
    .biome-stat span:last-child {
      color: #666;
      text-align: right;
    }
    
    .tabs {
      display: flex;
      margin-bottom: 2rem;
      border-bottom: none;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .tab {
      padding: 0.8rem 2rem;
      cursor: pointer;
      border-radius: 8px 8px 0 0;
      transition: all 0.3s ease;
      font-weight: 600;
      color: #666;
      background: #f5f5f5;
      border: none;
      font-family: inherit;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .tab.active {
      background: white;
      color: var(--primary);
      box-shadow: var(--card-shadow);
    }
    
    .tab:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .tab::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: var(--primary);
      transform: scaleX(0);
      transition: transform 0.3s ease;
    }
    
    .tab.active::after {
      transform: scaleX(1);
    }
    
    .tab-content {
      display: none;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      background-color: white;
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      padding: 20px;
      margin-bottom: 1.5rem;
    }
    
    .tab-content.ativo {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    
    .conteudo-incendio {
      background-color: #fff3f0;
    }
    
    .graficos-container {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin-top: 1.5rem;
      flex-wrap: wrap;
    }
    
    .grafico-wrapper {
      flex: 1;
      min-width: 300px;
      background: white;
      padding: 1.8rem;
      border-radius: 12px;
      box-shadow: var(--card-shadow);
      transition: all 0.3s ease;
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .grafico-wrapper:hover {
      transform: translateY(-5px);
      box-shadow: var(--card-hover-shadow);
    }
    
    .grafico-wrapper h3 {
      margin-bottom: 1.5rem;
      color: var(--primary);
    }
    
    .grafico-wrapper canvas {
      width: 100% !important;
      height: auto !important;
    }
    
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 2rem 3rem;
      border-radius: 16px;
      z-index: 1000;
      text-align: center;
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }
    
    .loading i {
      font-size: 2.5rem;
      color: var(--primary);
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .loading-text {
      font-weight: 600;
      color: var(--dark);
    }
    
    .mapa-incendios {
      text-align: center;
      margin-top: 1.5rem;
    }
    
    .mapa-incendios img {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    
    .mapa-incendios img:hover {
      transform: scale(1.02);
    }
    
    .mapa-incendios figcaption {
      margin-top: 0.5rem;
      font-size: 0.85rem;
      color: #666;
    }
    
    .satellite-track {
      stroke-dasharray: 5, 5;
      stroke-width: 2;
      fill: none;
      animation: dash 20s linear infinite;
    }
    
    @keyframes dash {
      to {
        stroke-dashoffset: -100;
      }
    }
    
    .satellite-marker {
      background: transparent;
      border: none;
    }
    
    .satellite-marker i {
      font-size: 1.5rem;
      color: #3498db;
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
      transition: all 0.3s ease;
    }
    
    .environmental-sat i {
      color: #e74c3c;
    }
    
    .satellite-marker i:hover {
      transform: scale(1.2);
    }
    
    .heatmap-control {
      background: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    
    .heatmap-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      cursor: pointer;
    }
    
    .heatmap-toggle input {
      margin: 0;
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      z-index: 1100;
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    .notification i {
      font-size: 1.2rem;
    }
    
    .notification.success i {
      color: var(--primary);
    }
    
    .notification.error i {
      color: var(--error);
    }
    
    .notification.warning i {
      color: var(--warning);
    }
    
    .notification-text {
      font-size: 0.9rem;
    }
    
    .notification-close {
      margin-left: 10px;
      cursor: pointer;
      opacity: 0.6;
      transition: opacity 0.2s ease;
    }
    
    .notification-close:hover {
      opacity: 1;
    }
    
    .timeline-control {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      background: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-width: 300px;
    }
    
    .timeline-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .timeline-slider {
      width: 100%;
    }
    
    .timeline-dates {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: #666;
    }
    
    .timeline-play {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .timeline-play:hover {
      background: var(--secondary);
      transform: scale(1.1);
    }
    
    .satellite-info {
      margin-bottom: 1rem;
    }
    
    .satellite-name {
      font-weight: 700;
      color: var(--primary);
      margin-bottom: 0.3rem;
      font-size: 1.1rem;
    }
    
    .satellite-id {
      font-size: 0.8rem;
      color: #666;
      margin-bottom: 0.5rem;
    }
    
    .satellite-detail {
      font-size: 0.85rem;
      margin-bottom: 0.3rem;
      display: flex;
    }
    
    .satellite-detail strong {
      min-width: 90px;
      display: inline-block;
      color: var(--dark);
    }
    
    .satellite-detail span {
      flex: 1;
    }
    
    .satellite-status {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 5px;
    }
    
    .status-active {
      background-color: #2ecc71;
    }
    
    .status-inactive {
      background-color: #e74c3c;
    }
    
    .status-maintenance {
      background-color: #f39c12;
    }
    
    .alert-banner {
      background-color: var(--error);
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 8px;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
      animation: pulse 2s infinite;
    }
    
    .alert-banner.warning {
      background-color: var(--warning);
    }
    
    .alert-banner i {
      font-size: 1.2rem;
    }
    
    .alert-text {
      flex: 1;
    }
    
    .alert-title {
      font-weight: 600;
      margin-bottom: 0.2rem;
    }
    
    .alert-description {
      font-size: 0.9rem;
      opacity: 0.9;
    }
    
    .alert-close {
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.2s ease;
    }
    
    .alert-close:hover {
      opacity: 1;
    }
    
    footer {
      background: var(--dark);
      color: white;
      padding: 3rem 0 2rem;
      margin-top: 4rem;
      position: relative;
    }
    
    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: var(--primary-gradient);
    }
    
    .footer-content {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    .footer-section {
      flex: 1;
      min-width: 250px;
    }
    
    .footer-section h3 {
      color: white;
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      position: relative;
      padding-bottom: 0.5rem;
    }
    
    .footer-section h3::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 2px;
      background: var(--accent);
    }
    
    .footer-links {
      list-style: none;
    }
    
    .footer-links li {
      margin-bottom: 0.6rem;
    }
    
    .footer-links a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .footer-links a:hover {
      color: var(--accent);
      transform: translateX(5px);
    }
    
    .footer-bottom {
      text-align: center;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .footer-bottom p {
      margin: 0.5rem 0;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
    }
    
    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 1rem;
    }
    
    .social-links a {
      color: white;
      background: rgba(255, 255, 255, 0.1);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .social-links a:hover {
      background: var(--accent);
      color: var(--dark);
      transform: translateY(-3px);
    }
    
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
    
    /* Responsividade */
    @media (max-width: 1200px) {
      .graficos-container {
        flex-direction: column;
      }
      
      .grafico-wrapper {
        min-width: 100%;
      }
    }
    
    @media (max-width: 992px) {
      #map-container {
        height: 600px;
      }
      
      .map-controls {
        flex-direction: column;
      }
      
      .control-group {
        width: 100%;
      }
      
      .map-controls select, 
      .map-controls button {
        width: 100%;
      }
      
      .timeline-control {
        width: 90%;
        left: 5%;
        transform: none;
      }
    }
    
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
      }
      
      nav ul {
        justify-content: center;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .tabs {
        overflow-x: auto;
        white-space: nowrap;
        padding-bottom: 8px;
        -webkit-overflow-scrolling: touch;
      }
      
      .tab {
        padding: 0.6rem 1.2rem;
        font-size: 0.9rem;
      }
      
      .map-overlay {
        position: relative;
        top: auto !important;
        left: auto !important;
        right: auto !important;
        bottom: auto !important;
        max-width: 100%;
        margin-bottom: 1rem;
      }
      
      #map-container {
        height: 500px;
      }
      
      .biome-info, .map-legend, .satellite-info-panel {
        margin-top: 1rem;
      }
      
      .footer-section {
        min-width: 100%;
      }
    }
    
    @media (max-width: 576px) {
      h1 {
        font-size: 1.5rem;
      }
      
      h2 {
        font-size: 1.3rem;
      }
      
      #map-container {
        height: 400px;
      }
      
      .tab {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
      }
      
      .grafico-wrapper, .map-controls {
        padding: 1.2rem;
      }
      
      footer {
        padding: 2rem 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container header-content">
      <div>
        <h1><i class="fas fa-satellite" aria-hidden="true"></i>GeoVision Brasil</h1>
        <p class="tagline">Monitoramento avançado de biomas por satélite</p>
      </div>
      <nav aria-label="Navegação principal">
        <ul>
          <li><a href="index.html" class="nav-link"><i class="fas fa-home" aria-hidden="true"></i> <span>Home</span></a></li>
          <li><a href="index.html#sobre" class="nav-link"><i class="fas fa-home" aria-hidden="true"></i> <span>Sobre</span></a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="map-section animate__animated animate__fadeInUp" aria-labelledby="map-section-title">
      <div class="section-title">
        <h2 id="map-section-title"><i class="fas fa-map-marked-alt"></i> Mapa Interativo de Monitoramento</h2>
      </div>
      
      <!-- Sistema de abas -->
      <div class="tabs" role="tablist">
        <button class="tab active" id="botaoSatellite" data-tab="satellite" role="tab" aria-selected="true" aria-controls="satellite-tab">
          <i class="fas fa-satellite"></i> Satélites
        </button>
        <button class="tab" id="botaoVegetacao" data-tab="vegetacao" role="tab" aria-selected="false" aria-controls="vegetacao-tab">
          <i class="fas fa-tree"></i> Vegetação
        </button>
        <button class="tab" id="botaoIncendio" data-tab="incendios" role="tab" aria-selected="false" aria-controls="incendios-tab">
          <i class="fas fa-fire"></i> Incêndios
        </button>
        <button class="tab" id="botaoDesmatamento" data-tab="desmatamento" role="tab" aria-selected="false" aria-controls="desmatamento-tab">
          <i class="fas fa-cut"></i> Desmatamento
        </button>
      </div>
      
      <!-- Conteúdo das abas -->
      <div class="tab-content" id="satellite-tab" role="tabpanel" aria-labelledby="botaoSatellite">
        <div class="alert-banner warning">
          <i class="fas fa-exclamation-triangle"></i>
          <div class="alert-text">
            <div class="alert-title">Alerta de Incêndios no Pantanal</div>
            <div class="alert-description">Foram detectados 124 novos focos de incêndio nas últimas 24 horas</div>
          </div>
          <div class="alert-close" onclick="this.parentElement.style.display='none'">
            <i class="fas fa-times"></i>
          </div>
        </div>
        
        <p>Visualização simulada e real a posição dos satélites que monitoram os biomas brasileiros. Selecione um bioma ou satélite específico para filtrar os dados.</p>
      </div>
      
      <div class="tab-content" id="vegetacao-tab" role="tabpanel" aria-labelledby="botaoVegetacao">
        <h3>Vegetação do Brasil</h3>
        <p>Análise da cobertura vegetal nos diferentes biomas brasileiros e sua evolução ao longo do tempo.</p>
        
        <div class="graficos-container">
          <div class="grafico-wrapper">
            <h3>Cobertura Vegetal por Bioma (2023)</h3>
            <canvas id="graficoVegetacao" width="400" height="300" aria-label="Gráfico de cobertura vegetal por bioma" role="img"></canvas>
          </div>
          <div class="grafico-wrapper">
            <h3>Índice de Vegetação (NDVI)</h3>
            <canvas id="graficoNDVI" width="400" height="300" aria-label="Gráfico de índice de vegetação por bioma" role="img"></canvas>
          </div>
        </div>
      </div>
      
      <div class="tab-content conteudo-incendio" id="incendios-tab" role="tabpanel" aria-labelledby="botaoIncendio">
        <div class="graficos-container">
          <div class="grafico-wrapper">
            <h3>Incidência de Incêndios por Bioma (2023)</h3>
            <canvas id="graficoIncendios" width="400" height="300" aria-label="Gráfico de incidência de incêndios por bioma" role="img"></canvas>
          </div>
          <div class="grafico-wrapper">
            <h3>Áreas mais afetadas por incêndios em 2023</h3>
            <div class="mapa-incendios">
              <img src="https://imagens.climatempo.com.br/climapress/galeria/2021/08/7ea3c1c66cf54d43586510945c303d2d.jpg" alt="Mapa de focos de incêndio detectados por satélite em 2023">
              <figcaption>Focos de incêndio detectados por satélites de monitoramento ambiental</figcaption>
            </div>
          </div>
        </div>
      </div>
      
      <div class="tab-content" id="desmatamento-tab" role="tabpanel" aria-labelledby="botaoDesmatamento">
        <h3>Desmatamento nos Biomas Brasileiros</h3>
        <p>Evolução das áreas desmatadas nos principais biomas brasileiros nos últimos anos.</p>
        
        <div class="graficos-container">
          <div class="grafico-wrapper">
            <h3>Área Desmatada (2023)</h3>
            <canvas id="graficoDesmatamento" width="400" height="300" aria-label="Gráfico de desmatamento por bioma" role="img"></canvas>
          </div>
          <div class="grafico-wrapper">
            <h3>Evolução do Desmatamento (2018-2023)</h3>
            <canvas id="graficoEvolucaoDesmatamento" width="400" height="300" aria-label="Gráfico de evolução do desmatamento" role="img"></canvas>
          </div>
        </div>
      </div>
      
      <!-- Controles do mapa -->
      <div class="map-controls">
        <div class="control-group">
          <div class="select-wrapper">
            <label for="biome-select" class="sr-only">Selecione um bioma</label>
            <select id="biome-select" aria-label="Selecione um bioma para visualizar">
              <option value="all">Todos os Biomas</option>
              <option value="amazonia">Amazônia</option>
              <option value="cerrado">Cerrado</option>
              <option value="mata_atlantica">Mata Atlântica</option>
              <option value="caatinga">Caatinga</option>
              <option value="pantanal">Pantanal</option>
              <option value="pampa">Pampa</option>
            </select>
            <i class="fas fa-chevron-down"></i>
          </div>
          
          <div class="select-wrapper">
            <label for="satellite-select" class="sr-only">Selecione um satélite</label>
            <select id="satellite-select" aria-label="Selecione um satélite para visualizar">
              <option value="all">Todos os Satélites</option>
              <option value="CBERS">CBERS</option>
              <option value="LANDSAT">Landsat</option>
              <option value="SENTINEL">Sentinel</option>
              <option value="TERRA">Terra</option>
              <option value="AQUA">Aqua</option>
            </select>
            <i class="fas fa-chevron-down"></i>
          </div>
        </div>
        
        <div class="control-group">
          <button id="fullscreen-btn" class="btn-primary" aria-label="Alternar modo tela cheia">
            <i class="fas fa-expand" aria-hidden="true"></i> Tela Cheia
          </button>
          <button id="refresh-btn" class="btn-primary" aria-label="Atualizar dados dos satélites">
            <i class="fas fa-sync-alt" aria-hidden="true"></i> Atualizar
          </button>
          <button id="heatmap-btn" class="btn-primary secondary" aria-label="Alternar mapa de calor de incêndios">
            <i class="fas fa-fire" aria-hidden="true"></i> Mapa de Calor
          </button>
        </div>
      </div>
      
      <!-- Container do mapa -->
      <div id="map-container">
        <div id="map" aria-label="Mapa interativo de monitoramento de biomas brasileiros" role="application"></div>
        
        <!-- Painel de informações do bioma -->
        <div class="map-overlay biome-info" id="biome-info">
          <div class="biome-title" id="biome-title">Selecione um bioma</div>
          <div class="biome-description" id="biome-description">Clique em um bioma no mapa para ver informações detalhadas</div>
          <div class="biome-stats" id="biome-stats"></div>
        </div>
        
        <!-- Painel de informações do satélite -->
        <div class="map-overlay satellite-info-panel" id="satellite-info" style="display: none;">
          <div class="satellite-info">
            <div class="satellite-name" id="satellite-name">Nome do Satélite</div>
            <div class="satellite-id" id="satellite-id">ID: -</div>
            <div class="satellite-detail"><strong>Status:</strong> <span id="satellite-status"><span class="satellite-status status-active"></span> Ativo</span></div>
            <div class="satellite-detail"><strong>Operador:</strong> <span id="satellite-operator">-</span></div>
            <div class="satellite-detail"><strong>Lançamento:</strong> <span id="satellite-launch">-</span></div>
            <div class="satellite-detail"><strong>Órbita:</strong> <span id="satellite-orbit">-</span></div>
            <div class="satellite-detail"><strong>Altitude:</strong> <span id="satellite-altitude">-</span></div>
            <div class="satellite-detail"><strong>Cobertura:</strong> <span id="satellite-swath">-</span></div>
            <div class="satellite-detail"><strong>Última passagem:</strong> <span id="satellite-lastpass">-</span></div>
          </div>
          <button id="track-satellite-btn" class="btn-primary" style="width: 100%; margin-top: 10px;">
            <i class="fas fa-satellite-dish"></i> Rastrear Satélite
          </button>
        </div>
        
        <!-- Legenda do mapa -->
        <div class="map-overlay map-legend" id="map-legend">
          <h4>Legenda</h4>
          <div class="legend-item">
            <div class="legend-color" style="background-color: var(--amazonia);"></div>
            <span>Amazônia</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: var(--cerrado);"></div>
            <span>Cerrado</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: var(--mata-atlantica);"></div>
            <span>Mata Atlântica</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: var(--caatinga);"></div>
            <span>Caatinga</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: var(--pantanal);"></div>
            <span>Pantanal</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: var(--pampa);"></div>
            <span>Pampa</span>
          </div>
          <div class="legend-item">
            <div class="legend-color legend-color-circle" style="background-color: #3498db;"></div>
            <span>Satélites</span>
          </div>
          <div class="legend-item">
            <div class="legend-color legend-color-circle" style="background-color: #e74c3c;"></div>
            <span>Satélites Ambientais</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: rgba(231, 76, 60, 0.3);"></div>
            <span>Área de Cobertura</span>
          </div>
          <div class="legend-item" id="heatmap-legend-item" style="display: none;">
            <div class="legend-color" style="background: linear-gradient(to right, #ffffcc, #ffeda0, #fed976, #feb24c, #fd8d3c, #fc4e2a, #e31a1c, #bd0026, #800026); width: 100px; height: 15px;"></div>
            <span>Intensidade de Incêndios</span>
          </div>
        </div>
        
        <!-- Controle de linha do tempo -->
        <div class="timeline-control" id="timeline-control" style="display: none;">
          <div class="timeline-header">
            <h4>Linha do Tempo</h4>
            <button class="timeline-play" id="timeline-play-btn">
              <i class="fas fa-play"></i>
            </button>
          </div>
          <input type="range" min="1" max="12" value="6" class="timeline-slider" id="timeline-slider">
          <div class="timeline-dates">
            <span>Jan 2023</span>
            <span>Jun 2023</span>
            <span>Dez 2023</span>
          </div>
        </div>
        
        <!-- Tela de carregamento -->
        <div id="loading" class="loading" style="display: none;">
          <i class="fas fa-satellite" aria-hidden="true"></i>
          <span class="loading-text">Carregando dados de satélite...</span>
        </div>
      </div>
    </section>
  </main>

  <!-- Notificação -->
  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i>
    <span class="notification-text">Dados atualizados com sucesso!</span>
    <span class="notification-close" onclick="hideNotification()">
      <i class="fas fa-times"></i>
    </span>
  </div>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>Sobre o Projeto</h3>
          <p>Plataforma de monitoramento ambiental que utiliza dados simulados de satélite para acompanhar a saúde dos biomas brasileiros, para fins educativos.</p>
          <div class="social-links">
            <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
            <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        
        <div class="footer-section">
          <h3>Links Úteis</h3>
          <ul class="footer-links">
            <li><a href="https://terrabrasilis.dpi.inpe.br/queimadas/bdqueimadas/"><i class="fas fa-chevron-right"></i> INPE - Queimadas</a></li>
            <li><a href="https://pamgia.ibama.gov.br/geoservicos/"><i class="fas fa-chevron-right"></i> IBAMA - Monitoramento</a></li>
            <li><a href="https://www.ibge.gov.br/apps/biomas/#/home"><i class="fas fa-chevron-right"></i> MMA - Biomas Brasileiros</a></li>
            <li><a href="https://search.earthdata.nasa.gov/?fst0=Biosphere"><i class="fas fa-chevron-right"></i> NASA - Earth Data</a></li>
          </ul>
        </div>
        
        <div class="footer-section">
          <h3>Contato</h3>
          <ul class="footer-links">
            <li><a href="#"><i class="fas fa-envelope"></i> Aluno Ryan Santos - Unespar</a></li>
            <li><a href="#"><i class="fas fa-phone"></i> (43) 99999-9999</a></li>
            <li><a href="#"><i class="fas fa-map-marker-alt"></i> Apucarana - PR, Brasil</a></li>
          </ul>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>© <span id="current-year">2025</span> GeoVision Brasil | Monitoramento de Biomas Brasileiros por Satélite</p>
        <p>Desenvolvido para Feira de Ciência da Computação - Unespar</p>
      </div>
    </div>
  </footer>

  <!-- Scripts Externos -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
  <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/leaflet.fullscreen@2.0.0/Control.FullScreen.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>

  <!-- Script Principal -->
  <script>
    // Dados aprimorados dos biomas brasileiros
    const biomesData = {
      amazonia: {
        name: "Amazônia",
        color: "var(--amazonia)",
        lightColor: "var(--amazonia-light)",
        description: "Maior floresta tropical do mundo, com biodiversidade incomparável e fundamental para o equilíbrio climático global.",
        center: [-3.465, -62.215],
        zoom: 5,
        stats: {
          "Área Total": "5.5 milhões km²",
          "Área no Brasil": "4.2 milhões km²",
          "Cobertura Vegetal": "83%",
          "Desmatamento (2023)": "11,568 km²",
          "Redução desde 2000": "17.5%",
          "Unidades Conservação": "334 áreas",
          "Espécies Vegetais": "30,000+",
          "Espécies Animais": "10,000+",
          "Satélites Ativos": "5"
        },
        threats: {
          "Desmatamento": "Alto",
          "Incêndios": "Médio",
          "Mineração": "Alto",
          "Agricultura": "Alto"
        }
      },
      cerrado: {
        name: "Cerrado",
        color: "var(--cerrado)",
        lightColor: "var(--cerrado-light)",
        description: "Savana mais rica em biodiversidade do mundo, conhecido como 'berço das águas' por abrigar nascentes de importantes bacias hidrográficas.",
        center: [-15.788, -47.879],
        zoom: 5,
        stats: {
          "Área Total": "2 milhões km²",
          "Cobertura Vegetal": "51%",
          "Desmatamento (2023)": "8,531 km²",
          "Redução desde 2000": "50.2%",
          "Unidades Conservação": "112 áreas",
          "Espécies Vegetais": "12,000+",
          "Espécies Animais": "2,500+",
          "Satélites Ativos": "4"
        },
        threats: {
          "Agricultura": "Muito Alto",
          "Pecuária": "Alto",
          "Incêndios": "Alto",
          "Expansão Urbana": "Médio"
        }
      },
      mata_atlantica: {
        name: "Mata Atlântica",
        color: "var(--mata-atlantica)",
        lightColor: "var(--mata-atlantica-light)",
        description: "Bioma mais ameaçado do Brasil, com apenas 12% da cobertura original, abriga grande diversidade de espécies endêmicas.",
        center: [-22.951, -43.210],
        zoom: 5,
        stats: {
          "Área Original": "1.3 milhões km²",
          "Área Remanescente": "156,000 km²",
          "Cobertura Vegetal": "12%",
          "Desmatamento (2023)": "206 km²",
          "Redução desde 2000": "3.5%",
          "Unidades Conservação": "131 áreas",
          "Espécies Vegetais": "20,000+",
          "Espécies Animais": "2,200+",
          "Satélites Ativos": "3"
        },
        threats: {
          "Expansão Urbana": "Muito Alto",
          "Agricultura": "Alto",
          "Exploração Madeireira": "Médio",
          "Poluição": "Alto"
        }
      },
      caatinga: {
        name: "Caatinga",
        color: "var(--caatinga)",
        lightColor: "var(--caatinga-light)",
        description: "Único bioma exclusivamente brasileiro, adaptado ao clima semiárido, com espécies vegetais e animais únicas no mundo.",
        center: [-9.654, -40.569],
        zoom: 5,
        stats: {
          "Área Total": "844,453 km²",
          "Cobertura Vegetal": "63%",
          "Desmatamento (2023)": "3,129 km²",
          "Redução desde 2000": "15.8%",
          "Unidades Conservação": "46 áreas",
          "Espécies Vegetais": "3,000+",
          "Espécies Endêmicas": "1,200+",
          "Satélites Ativos": "2"
        },
        threats: {
          "Desmatamento": "Alto",
          "Seca": "Muito Alto",
          "Pastoreio": "Alto",
          "Mineracao": "Médio"
        }
      },
      pantanal: {
        name: "Pantanal",
        color: "var(--pantanal)",
        lightColor: "var(--pantanal-light)",
        description: "Maior planície alagável do mundo, com rica biodiversidade aquática e importante rota migratória de aves.",
        center: [-18.005, -56.633],
        zoom: 6,
        stats: {
          "Área Total": "150,355 km²",
          "Área no Brasil": "62% do total",
          "Cobertura Vegetal": "86%",
          "Área Alagada": "78% (estação chuvosa)",
          "Incêndios (2023)": "3,978 focos",
          "Unidades Conservação": "28 áreas",
          "Espécies de Peixes": "260+",
          "Espécies de Aves": "650+",
          "Satélites Ativos": "3"
        },
        threats: {
          "Incêndios": "Muito Alto",
          "Pecuária": "Alto",
          "Agricultura": "Médio",
          "Mudanças Climáticas": "Alto"
        }
      },
      pampa: {
        name: "Pampa",
        color: "var(--pampa)",
        lightColor: "var(--pampa-light)",
        description: "Bioma campestre com paisagens abertas e biodiversidade única, fortemente impactado pela expansão agrícola.",
        center: [-30.5, -54.0],
        zoom: 6,
        stats: {
          "Área Total": "176,496 km²",
          "Cobertura Vegetal": "41%",
          "Área Agricultura": "54%",
          "Desmatamento (2023)": "1,245 km²",
          "Unidades Conservação": "8 áreas",
          "Espécies Vegetais": "3,000+",
          "Espécies Ameaçadas": "100+",
          "Satélites Ativos": "2"
        },
        threats: {
          "Agricultura": "Muito Alto",
          "Pecuária": "Alto",
          "Expansão Florestal": "Médio",
          "Urbanização": "Médio"
        }
      }
    };

    // Dados aprimorados dos satélites
    const satellitesData = [
      { 
        id: "CBERS-4", 
        name: "CBERS-4 (China-Brazil)", 
        type: "environmental",
        status: "active",
        orbit: "SSO (Sun-Synchronous Orbit)",
        altitude: 780,
        swath: 120,
        launch: "07/12/2014",
        operator: "INPE/CAST",
        resolution: "20m (multiespectral), 5m (panchromatic)",
        biomes: ["amazonia", "cerrado", "mata_atlantica", "caatinga", "pantanal"],
        instruments: ["MUXCam", "WFI", "IRS"],
        nextPass: ""
      },
      { 
        id: "CBERS-4A", 
        name: "CBERS-4A (China-Brazil)", 
        type: "environmental",
        status: "active",
        orbit: "SSO (Sun-Synchronous Orbit)",
        altitude: 628,
        swath: 90,
        launch: "20/12/2019",
        operator: "INPE/CAST",
        resolution: "8m (multiespectral), 2m (panchromatic)",
        biomes: ["amazonia", "cerrado", "mata_atlantica"],
        instruments: ["MUX", "WFI-2"],
        nextPass: ""
      },
      { 
        id: "LANDSAT-8", 
        name: "Landsat 8", 
        type: "environmental",
        status: "active",
        orbit: "Polar",
        altitude: 705,
        swath: 185,
        launch: "11/02/2013",
        operator: "NASA/USGS",
        resolution: "30m (multiespectral), 15m (panchromatic)",
        biomes: ["amazonia", "cerrado", "mata_atlantica", "caatinga", "pantanal", "pampa"],
        instruments: ["OLI", "TIRS"],
        nextPass: ""
      },
      { 
        id: "LANDSAT-9", 
        name: "Landsat 9", 
        type: "environmental",
        status: "active",
        orbit: "Polar",
        altitude: 705,
        swath: 185,
        launch: "27/09/2021",
        operator: "NASA/USGS",
        resolution: "30m (multiespectral), 15m (panchromatic)",
        biomes: ["amazonia", "cerrado", "pantanal"],
        instruments: ["OLI-2", "TIRS-2"],
        nextPass: ""
      },
      { 
        id: "SENTINEL-2A", 
        name: "Sentinel-2A", 
        type: "environmental",
        status: "active",
        orbit: "SSO",
        altitude: 786,
        swath: 290,
        launch: "23/06/2015",
        operator: "ESA",
        resolution: "10m-60m (multiespectral)",
        biomes: ["amazonia", "cerrado", "mata_atlantica", "pantanal", "pampa"],
        instruments: ["MSI"],
        nextPass: ""
      },
      { 
        id: "SENTINEL-2B", 
        name: "Sentinel-2B", 
        type: "environmental",
        status: "maintenance",
        orbit: "SSO",
        altitude: 786,
        swath: 290,
        launch: "07/03/2017",
        operator: "ESA",
        resolution: "10m-60m (multiespectral)",
        biomes: ["amazonia", "cerrado", "pantanal"],
        instruments: ["MSI"],
        nextPass: ""
      },
      { 
        id: "TERRA", 
        name: "Terra (EOS AM-1)", 
        type: "environmental",
        status: "active",
        orbit: "Polar",
        altitude: 705,
        swath: 2330,
        launch: "18/12/1999",
        operator: "NASA",
        resolution: "250m-1000m",
        biomes: ["amazonia", "cerrado"],
        instruments: ["MODIS", "ASTER", "CERES"],
        nextPass: ""
      },
      { 
        id: "AQUA", 
        name: "Aqua (EOS PM-1)", 
        type: "environmental",
        status: "active",
        orbit: "Polar",
        altitude: 705,
        swath: 2330,
        launch: "04/05/2002",
        operator: "NASA",
        resolution: "250m-1000m",
        biomes: ["amazonia"],
        instruments: ["MODIS", "AIRSS"],
        nextPass: ""
      },
      { 
        id: "NOAA-20", 
        name: "NOAA-20", 
        type: "environmental",
        status: "active",
        orbit: "Polar",
        altitude: 824,
        swath: 3000,
        launch: "18/11/2017",
        operator: "NOAA/NASA",
        resolution: "375m-750m",
        biomes: ["amazonia", "cerrado", "pantanal"],
        instruments: ["VIIRS", "CrIS", "ATMS"],
        nextPass: ""
      }
    ];

    // Dados para os gráficos
    const chartData = {
      vegetation: {
        labels: ['Amazônia', 'Cerrado', 'Caatinga', 'Mata Atlântica', 'Pampa', 'Pantanal'],
        datasets: [{
          label: 'Área de vegetação (milhões km²)',
          data: [4.2, 2.0, 0.8, 1.3, 0.2, 0.15],
          backgroundColor: [
            '#2e7d32',
            '#c0ca33',
            '#fbc02d',
            '#388e3c',
            '#8d6e63',
            '#009688'
          ],
          borderWidth: 1
        }]
      },
      ndvi: {
        labels: ['Amazônia', 'Cerrado', 'Caatinga', 'Mata Atlântica', 'Pampa', 'Pantanal'],
        datasets: [{
          label: 'Índice de Vegetação (NDVI)',
          data: [0.85, 0.72, 0.65, 0.78, 0.68, 0.82],
          backgroundColor: [
            '#1b5e20',
            '#827717',
            '#f57f17',
            '#2e7d32',
            '#6d4c41',
            '#00897b'
          ],
          borderWidth: 1
        }]
      },
      deforestation: {
        labels: ['Brasil (total)', 'Amazônia', 'Cerrado', 'Mata Atlântica', 'Caatinga', 'Pampa', 'Pantanal'],
        datasets: [{
          label: 'Desmatamento em 2023',
          data: [1829597, 900100, 1110326, 20600, 312900, 124500, 18700],
          backgroundColor: [
            '#388e3c', 
            '#2e7d32', 
            '#c0ca33',
            '#43a047',
            '#fbc02d',
            '#8d6e63',
            '#009688'
          ]
        }]
      },
      deforestationEvolution: {
        labels: ['2018', '2019', '2020', '2021', '2022', '2023'],
        datasets: [
          {
            label: 'Amazônia',
            data: [753600, 1012900, 1098500, 1323500, 1156800, 900100],
            borderColor: '#2e7d32',
            backgroundColor: 'rgba(46, 125, 50, 0.1)',
            fill: true,
            tension: 0.3
          },
          {
            label: 'Cerrado',
            data: [687200, 892500, 1023400, 1205600, 1256700, 1110326],
            borderColor: '#c0ca33',
            backgroundColor: 'rgba(192, 202, 51, 0.1)',
            fill: true,
            tension: 0.3
          },
          {
            label: 'Mata Atlântica',
            data: [18200, 19500, 21300, 22400, 21800, 20600],
            borderColor: '#43a047',
            backgroundColor: 'rgba(67, 160, 71, 0.1)',
            fill: true,
            tension: 0.3
          }
        ]
      },
      fires: {
        labels: ['Amazônia', 'Cerrado', 'Pantanal', 'Caatinga', 'Mata Atlântica', 'Pampa'],
        datasets: [{
          label: 'Incêndios registrados em 2023 (focos)',
          data: [35678, 29852, 18567, 14320, 5221, 2087],
          backgroundColor: [
            '#e53935',
            '#fb8c00',
            '#fdd835',
            '#8d6e63',
            '#4caf50',
            '#90a4ae'
          ]
        }]
      }
    };

    // Dados de focos de incêndio para o mapa de calor
    const fireData = {
      amazonia: [
        [-2.908, -54.861, 0.8],
        [-3.465, -62.215, 0.6],
        [-4.263, -55.862, 0.7],
        [-5.532, -57.321, 0.5],
        [-6.123, -58.764, 0.9]
      ],
      cerrado: [
        [-15.788, -47.879, 0.9],
        [-16.432, -45.321, 0.7],
        [-14.765, -46.543, 0.8],
        [-13.987, -48.654, 0.6],
        [-12.345, -49.876, 0.5]
      ],
      pantanal: [
        [-18.005, -56.633, 1.0],
        [-17.543, -57.321, 0.9],
        [-18.765, -55.432, 0.8],
        [-19.123, -56.987, 0.7],
        [-17.987, -58.123, 0.6]
      ],
      caatinga: [
        [-9.654, -40.569, 0.5],
        [-8.765, -39.876, 0.4],
        [-10.123, -41.234, 0.6],
        [-9.876, -42.345, 0.3],
        [-8.543, -43.123, 0.5]
      ],
      mata_atlantica: [
        [-22.951, -43.210, 0.3],
        [-23.543, -44.321, 0.2],
        [-22.123, -42.876, 0.4],
        [-21.765, -43.987, 0.3],
        [-20.987, -44.543, 0.2]
      ],
      pampa: [
        [-30.5, -54.0, 0.1],
        [-29.876, -53.123, 0.2],
        [-31.234, -55.321, 0.1],
        [-30.987, -54.876, 0.2],
        [-29.543, -53.765, 0.1]
      ]
    };

    // Inicialização do mapa
    const map = L.map('map', {
      center: [-10, -55],
      zoom: 4,
      fullscreenControl: true,
      attributionControl: false
    });

    // Adicionar controle de tela cheia
    L.control.fullscreen({
      position: 'topleft',
      title: 'Tela Cheia',
      titleCancel: 'Sair da Tela Cheia',
      forceSeparateButton: true
    }).addTo(map);

    // Adicionar atribuição
    L.control.attribution({
      position: 'bottomright',
      prefix: '<a href="https://leafletjs.com/" target="_blank">Leaflet</a> | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);

    // Camadas base
    const baseLayers = {
      "Satélite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
      }),
      "Topográfico": L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'
      }),
      "OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      })
    };

    baseLayers["Satélite"].addTo(map);

    // Grupos de camadas
    const biomesLayer = L.layerGroup().addTo(map);
    const satellitesLayer = L.layerGroup().addTo(map);
    const coverageLayer = L.layerGroup().addTo(map);
    const satelliteTracksLayer = L.layerGroup().addTo(map);
    let heatmapLayer = null;
    let trackedSatellite = null;

    // Adicionar biomas ao mapa com polígonos mais precisos
    function addBiomesToMap() {
      // Coordenadas aproximadas dos biomas (em produção, use shapes precisos de geojson)
      const biomeShapes = {
        amazonia: [
          [-8, -72], [-4, -70], [-2, -68], [1, -66], [2, -62], [1, -58], [-2, -55], 
          [-5, -53], [-8, -52], [-12, -52], [-15, -53], [-18, -55], [-20, -58], 
          [-22, -62], [-23, -65], [-22, -68], [-20, -70], [-15, -72], [-10, -73], [-8, -72]
        ],
        cerrado: [
          [-2, -46], [-5, -45], [-8, -44], [-12, -44], [-15, -45], [-18, -47], 
          [-20, -50], [-18, -53], [-15, -55], [-12, -56], [-8, -56], [-5, -55], 
          [-2, -53], [0, -50], [0, -48], [-2, -46]
        ],
        mata_atlantica: [
          [-15, -38], [-18, -40], [-20, -42], [-22, -44], [-24, -46], [-25, -48], 
          [-27, -50], [-28, -52], [-27, -54], [-25, -55], [-23, -53], [-21, -50], 
          [-19, -47], [-17, -44], [-15, -41], [-15, -38]
        ],
        caatinga: [
          [-5, -38], [-8, -40], [-10, -42], [-12, -44], [-15, -45], [-18, -44], 
          [-20, -42], [-22, -40], [-23, -38], [-22, -36], [-20, -34], [-18, -32], 
          [-15, -30], [-12, -32], [-10, -34], [-8, -36], [-5, -38]
        ],
        pantanal: [
          [-16, -56], [-18, -57], [-20, -58], [-22, -57], [-20, -55], [-18, -54], 
          [-16, -55], [-16, -56]
        ],
        pampa: [
          [-28, -53], [-30, -54], [-32, -55], [-33, -56], [-32, -58], [-30, -57], 
          [-28, -56], [-27, -54], [-28, -53]
        ]
      };

      for (const biome in biomeShapes) {
        const polygon = L.polygon(biomeShapes[biome], {
          color: biomesData[biome].color,
          fillColor: biomesData[biome].lightColor,
          fillOpacity: 0.5,
          weight: 2
        }).addTo(biomesLayer);

        polygon.on('click', function() {
          showBiomeInfo(biome);
          showNotification(`Bioma ${biomesData[biome].name} selecionado`, 'success');
        });
        
        // Adicionar tooltip
        polygon.bindTooltip(biomesData[biome].name, {
          permanent: false,
          direction: 'auto',
          className: 'biome-tooltip'
        });
      }
    }

    // Mostrar informações detalhadas do bioma
    function showBiomeInfo(biome) {
      const info = biomesData[biome];
      const biomeTitle = document.getElementById('biome-title');
      biomeTitle.textContent = info.name;
      biomeTitle.style.backgroundColor = info.color;
      
      document.getElementById('biome-description').textContent = info.description;
      
      let statsHtml = '';
      for (const [key, value] of Object.entries(info.stats)) {
        statsHtml += `
          <div class="biome-stat">
            <span>${key}</span>
            <span>${value}</span>
          </div>
        `;
      }
      
      // Adicionar ameaças
      statsHtml += `<div class="biome-stat" style="margin-top: 1rem;"><span style="font-weight: 700; color: var(--error);">Principais Ameaças</span><span></span></div>`;
      
      for (const [threat, level] of Object.entries(info.threats)) {
        let threatColor = '#666';
        if (level === 'Alto') threatColor = 'var(--warning)';
        if (level === 'Muito Alto') threatColor = 'var(--error)';
        
        statsHtml += `
          <div class="biome-stat">
            <span>${threat}</span>
            <span style="color: ${threatColor}">${level}</span>
          </div>
        `;
      }
      
      document.getElementById('biome-stats').innerHTML = statsHtml;
      
      // Centralizar no bioma
      map.flyTo(info.center, info.zoom);
      
      // Atualizar satélites visíveis
      updateVisibleSatellites(biome);
      
      // Atualizar mapa de calor se estiver ativo
      if (heatmapLayer) {
        updateHeatmap(biome);
      }
    }

    // Mostrar informações do satélite
    function showSatelliteInfo(satellite) {
      const infoPanel = document.getElementById('satellite-info');
      document.getElementById('satellite-name').textContent = satellite.name;
      document.getElementById('satellite-id').textContent = `ID: ${satellite.id}`;
      
      // Atualizar status
      const statusElement = document.getElementById('satellite-status');
      statusElement.innerHTML = '';
      
      let statusDot, statusText;
      if (satellite.status === 'active') {
        statusDot = '<span class="satellite-status status-active"></span>';
        statusText = 'Ativo';
      } else if (satellite.status === 'inactive') {
        statusDot = '<span class="satellite-status status-inactive"></span>';
        statusText = 'Inativo';
      } else {
        statusDot = '<span class="satellite-status status-maintenance"></span>';
        statusText = 'Manutenção';
      }
      
      statusElement.innerHTML = `${statusDot} ${statusText}`;
      
      document.getElementById('satellite-operator').textContent = satellite.operator;
      document.getElementById('satellite-launch').textContent = satellite.launch;
      document.getElementById('satellite-orbit').textContent = satellite.orbit;
      document.getElementById('satellite-altitude').textContent = `${satellite.altitude} km`;
      document.getElementById('satellite-swath').textContent = `${satellite.swath} km`;
      
      // Calcular próxima passagem (simulado)
      const nextPassDate = new Date();
      nextPassDate.setMinutes(nextPassDate.getMinutes() + Math.floor(Math.random() * 120) + 30);
      document.getElementById('satellite-lastpass').textContent = nextPassDate.toLocaleTimeString();
      
      // Mostrar painel
      infoPanel.style.display = 'block';
      
      // Armazenar satélite atual para rastreamento
      trackedSatellite = satellite;
    }

    // Rastrear satélite selecionado
    function trackSatellite() {
      if (!trackedSatellite) return;
      
      // Limpar trilhas anteriores
      satelliteTracksLayer.clearLayers();
      
      // Gerar pontos de trajetória (simulado)
      const trackPoints = [];
      const startLat = trackedSatellite.lat;
      const startLng = trackedSatellite.lng;
      
      for (let i = 0; i < 10; i++) {
        trackPoints.push([
          startLat + (Math.random() * 2 - 1),
          startLng + (Math.random() * 4 - 2)
        ]);
      }
      
      // Adicionar linha de trajetória
      const trackLine = L.polyline(trackPoints, {
        color: '#3498db',
        dashArray: '5, 5',
        weight: 2
      }).addTo(satelliteTracksLayer);
      
      // Adicionar marcadores de posição futura
      trackPoints.forEach((point, index) => {
        if (index > 0) {
          L.circleMarker(point, {
            radius: 4,
            fillColor: '#3498db',
            color: '#fff',
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
          }).addTo(satelliteTracksLayer);
        }
      });
      
      showNotification(`Rastreando satélite ${trackedSatellite.id}`, 'success');
    }

    // Atualizar satélites visíveis com base nos filtros
    function updateVisibleSatellites(biome) {
      const selectedBiome = biome || document.getElementById('biome-select').value;
      const selectedSatellite = document.getElementById('satellite-select').value;
      
      satellitesLayer.eachLayer(layer => {
        const satId = layer.options.satelliteId;
        const satellite = satellitesData.find(s => s.id === satId);
        
        let shouldShow = true;
        
        if (selectedBiome !== 'all') {
          shouldShow = satellite.biomes.includes(selectedBiome);
        }
        
        if (selectedSatellite !== 'all') {
          shouldShow = shouldShow && satId.startsWith(selectedSatellite);
        }
        
        if (shouldShow) {
          layer.addTo(satellitesLayer);
        } else {
          satellitesLayer.removeLayer(layer);
        }
      });
      
      // Atualizar coberturas
      updateCoverageAreas();
    }

    // Atualizar áreas de cobertura dos satélites visíveis
    function updateCoverageAreas() {
      coverageLayer.clearLayers();
      
      satellitesLayer.eachLayer(layer => {
        const satId = layer.options.satelliteId;
        const satellite = satellitesData.find(s => s.id === satId);
        const coverage = calculateCoverage(layer.getLatLng().lat, layer.getLatLng().lng, satellite.altitude, satellite.swath);
        coverageLayer.addLayer(coverage);
      });
    }

    // Calcular área de cobertura do satélite
    function calculateCoverage(lat, lng, altitude, swath) {
      const earthRadius = 6371; // km
      const coverageAngle = Math.asin(swath / (2 * earthRadius));
      const coverageRadius = altitude * Math.tan(coverageAngle);
      
      return L.circle([lat, lng], {
        radius: coverageRadius * 1000, // converte para metros
        color: '#e74c3c',
        fillColor: '#e74c3c',
        fillOpacity: 0.1,
        weight: 1
      });
    }

    // Simular posições de satélites com movimento mais realista
    function simulateSatellitePositions() {
      return satellitesData.map(sat => {
        // Gerar posição com base em órbita simulada
        const now = new Date();
        const timeFactor = now.getMinutes() + now.getSeconds() / 60;
        
        // Posição baseada em órbita SSO (Sun-Synchronous Orbit)
        let lat, lng;
        
        if (sat.orbit.includes('SSO')) {
          // Órbita quase polar com inclinação ~98°
          lat = 82 * Math.sin(timeFactor * Math.PI / 30);
          lng = -60 + (timeFactor * 12) % 360 - 180;
        } else {
          // Órbita polar simples
          lat = 85 * Math.sin(timeFactor * Math.PI / 30);
          lng = -60 + (timeFactor * 6) % 360 - 180;
        }
        
        // Ajustar para ficar sobre o Brasil
        lat = (lat * 0.3) - 10;
        lng = (lng * 0.3) - 55;
        
        return {
          ...sat,
          lat: lat,
          lng: lng,
          timestamp: now
        };
      });
    }

    // Atualizar satélites no mapa com animação
    function updateSatellites() {
      document.getElementById('loading').style.display = 'flex';
      
      // Simular delay de carregamento
      setTimeout(() => {
        const satellites = simulateSatellitePositions();
        
        // Limpar camadas
        satellitesLayer.clearLayers();
        coverageLayer.clearLayers();
        satelliteTracksLayer.clearLayers();
        
        // Adicionar novos satélites com animação
        satellites.forEach(sat => {
          // Criar marcador
          const marker = L.marker([sat.lat, sat.lng], {
            icon: L.divIcon({
              className: 'satellite-marker ' + (sat.type === 'environmental' ? 'environmental-sat' : ''),
              html: `<i class="fas fa-satellite" style="color: ${sat.type === 'environmental' ? '#e74c3c' : '#3498db'}"></i>`,
              iconSize: [30, 30]
            }),
            satelliteId: sat.id
          });
          
          // Adicionar popup com informações
          marker.bindPopup(`
            <div class="satellite-info">
              <div class="satellite-name">${sat.name}</div>
              <div class="satellite-id">ID: ${sat.id}</div>
              <div class="satellite-detail"><strong>Status:</strong> <span class="satellite-status ${sat.status === 'active' ? 'status-active' : sat.status === 'inactive' ? 'status-inactive' : 'status-maintenance'}"></span> ${sat.status === 'active' ? 'Ativo' : sat.status === 'inactive' ? 'Inativo' : 'Manutenção'}</div>
              <div class="satellite-detail"><strong>Operador:</strong> ${sat.operator}</div>
              <div class="satellite-detail"><strong>Lançamento:</strong> ${sat.launch}</div>
              <div class="satellite-detail"><strong>Órbita:</strong> ${sat.orbit}</div>
              <div class="satellite-detail"><strong>Altitude:</strong> ${sat.altitude} km</div>
              <div class="satellite-detail"><strong>Cobertura:</strong> ${sat.swath} km</div>
              <div class="satellite-detail"><strong>Resolução:</strong> ${sat.resolution}</div>
              <div class="satellite-detail"><strong>Biomas monitorados:</strong> ${sat.biomes.map(b => biomesData[b].name).join(', ')}</div>
              <div class="satellite-detail"><strong>Última atualização:</strong> ${sat.timestamp.toLocaleTimeString()}</div>
            </div>
          `);
          
          // Evento de clique para mostrar painel de informações
          marker.on('click', function() {
            showSatelliteInfo(sat);
          });
          
          // Adicionar ao mapa com animação
          marker.addTo(satellitesLayer);
          
          // Adicionar área de cobertura
          const coverage = calculateCoverage(sat.lat, sat.lng, sat.altitude, sat.swath);
          coverageLayer.addLayer(coverage);
        });
        
        document.getElementById('loading').style.display = 'none';
        updateVisibleSatellites();
        showNotification('Dados de satélite atualizados com sucesso', 'success');
      }, 1500);
    }

    // Ativar/desativar mapa de calor de incêndios
    function toggleHeatmap() {
      const heatmapBtn = document.getElementById('heatmap-btn');
      
      if (heatmapLayer) {
        map.removeLayer(heatmapLayer);
        heatmapLayer = null;
        document.getElementById('heatmap-legend-item').style.display = 'none';
        heatmapBtn.innerHTML = '<i class="fas fa-fire"></i> Mapa de Calor';
        showNotification('Mapa de calor desativado', 'success');
      } else {
        // Obter bioma selecionado ou usar 'all'
        const selectedBiome = document.getElementById('biome-select').value;
        updateHeatmap(selectedBiome);
        document.getElementById('heatmap-legend-item').style.display = 'flex';
        heatmapBtn.innerHTML = '<i class="fas fa-times"></i> Mapa de Calor';
        showNotification('Mapa de calor ativado', 'success');
      }
    }

    // Atualizar mapa de calor para o bioma selecionado
    function updateHeatmap(biome) {
      // Remover layer existente
      if (heatmapLayer) {
        map.removeLayer(heatmapLayer);
      }
      
      let points = [];
      
      if (biome === 'all') {
        // Todos os biomas
        for (const key in fireData) {
          points = points.concat(fireData[key]);
        }
      } else if (fireData[biome]) {
        // Bioma específico
        points = fireData[biome];
      }
      
      // Criar mapa de calor
      heatmapLayer = L.heatLayer(points, {
        radius: 25,
        blur: 15,
        maxZoom: 7,
        gradient: {
          0.1: '#ffffcc',
          0.2: '#ffeda0',
          0.3: '#fed976',
          0.4: '#feb24c',
          0.5: '#fd8d3c',
          0.6: '#fc4e2a',
          0.7: '#e31a1c',
          0.8: '#bd0026',
          0.9: '#800026'
        }
      }).addTo(map);
    }

    // Mostrar notificação
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      notification.className = 'notification';
      notification.querySelector('i').className = type === 'success' ? 'fas fa-check-circle' : 
                                                 type === 'error' ? 'fas fa-exclamation-circle' : 
                                                 'fas fa-info-circle';
      notification.querySelector('.notification-text').textContent = message;
      
      // Aplicar classe de tipo
      setTimeout(() => {
        notification.classList.add('show');
        notification.classList.add(type);
      }, 10);
      
      // Esconder após 5 segundos
      setTimeout(hideNotification, 5000);
    }

    // Esconder notificação
    function hideNotification() {
      const notification = document.getElementById('notification');
      notification.classList.remove('show');
    }

    // Inicializar gráficos com Chart.js
    function initCharts() {
      // Gráfico de vegetação
      const ctxVegetacao = document.getElementById('graficoVegetacao').getContext('2d');
      new Chart(ctxVegetacao, {
        type: 'bar',
        data: chartData.vegetation,
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top',
              labels: {
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              }
            },
            tooltip: {
              callbacks: {
                label: context => `${context.dataset.label}: ${context.raw} milhões km²`
              }
            },
            datalabels: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Milhões de km²',
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              },
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            },
            x: {
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      });

      // Gráfico de NDVI
      const ctxNDVI = document.getElementById('graficoNDVI').getContext('2d');
      new Chart(ctxNDVI, {
        type: 'bar',
        data: chartData.ndvi,
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top',
              labels: {
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              }
            },
            tooltip: {
              callbacks: {
                label: context => `${context.dataset.label}: ${context.raw}`
              }
            },
            datalabels: {
              formatter: value => value.toFixed(2),
              color: '#000',
              anchor: 'end',
              align: 'top',
              font: {
                family: 'Montserrat',
                size: 11,
                weight: 'bold'
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 1.0,
              title: {
                display: true,
                text: 'Índice NDVI (0-1)',
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              },
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            },
            x: {
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      });

      // Gráfico de desmatamento
      const ctxDesmatamento = document.getElementById('graficoDesmatamento').getContext('2d');
      new Chart(ctxDesmatamento, {
        type: 'bar',
        data: chartData.deforestation,
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top',
              labels: {
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              }
            },
            tooltip: {
              callbacks: {
                label: context => `${context.dataset.label}: ${context.raw.toLocaleString()} ha`
              }
            },
            datalabels: {
              color: '#000',
              anchor: 'end',
              align: 'top',
              font: {
                family: 'Montserrat',
                size: 11,
                weight: 'bold'
              },
              formatter: value => (value/1000).toFixed(1) + 'k ha'
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Área (hectares)',
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              },
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            },
            x: {
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      });

      // Gráfico de evolução do desmatamento
      const ctxEvolucaoDesmatamento = document.getElementById('graficoEvolucaoDesmatamento').getContext('2d');
      new Chart(ctxEvolucaoDesmatamento, {
        type: 'line',
        data: chartData.deforestationEvolution,
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top',
              labels: {
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              }
            },
            tooltip: {
              callbacks: {
                label: context => `${context.dataset.label}: ${context.raw.toLocaleString()} ha`
              }
            },
            datalabels: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Área (hectares)',
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              },
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            },
            x: {
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      });

      // Gráfico de incêndios
      const ctxIncendios = document.getElementById('graficoIncendios').getContext('2d');
      new Chart(ctxIncendios, {
        type: 'bar',
        data: chartData.fires,
        options: {
          responsive: true,
          plugins: {
            legend: { 
              position: 'top',
              labels: {
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              }
            },
            tooltip: {
              callbacks: {
                label: context => `${context.dataset.label}: ${context.raw.toLocaleString()} focos`
              }
            },
            datalabels: {
              color: '#000',
              anchor: 'end',
              align: 'top',
              font: {
                family: 'Montserrat',
                size: 11,
                weight: 'bold'
              },
              formatter: value => value.toLocaleString()
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: 'Número de focos',
                font: {
                  family: 'Montserrat',
                  size: 12
                }
              },
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            },
            x: {
              ticks: {
                font: {
                  family: 'Montserrat',
                  size: 11
                }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      });
    }

    // Configurar sistema de abas
    function setupTabs() {
      const tabs = document.querySelectorAll('.tab');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', function() {
          // Desativar todas as abas
          tabs.forEach(t => {
            t.classList.remove('active');
            t.setAttribute('aria-selected', 'false');
          });
          
          // Ativar a aba clicada
          this.classList.add('active');
          this.setAttribute('aria-selected', 'true');
          
          // Esconder todos os conteúdos
          tabContents.forEach(content => {
            content.classList.remove('ativo');
            content.style.display = 'none';
          });
          
          // Mostrar o conteúdo correspondente
          const tabId = this.getAttribute('data-tab');
          const content = document.getElementById(`${tabId}-tab`);
          if (content) {
            content.style.display = 'block';
            setTimeout(() => {
              content.classList.add('ativo');
            }, 10);
          }
          
          // Ajustes específicos para cada aba
          switch(tabId) {
            case 'incendios':
              map.flyTo([-18.005, -56.633], 6);
              if (heatmapLayer) {
                updateHeatmap(document.getElementById('biome-select').value);
              }
              break;
            case 'vegetacao':
              map.flyTo([-10, -55], 4);
              break;
            case 'desmatamento':
              map.flyTo([-3.465, -62.215], 5);
              break;
            case 'satellite':
              map.flyTo([-10, -55], 4);
              break;
          }
        });
      });
      
      // Mostrar a primeira aba por padrão
      document.querySelector('.tab.active').click();
    }

    // Configurar controles da linha do tempo
    function setupTimelineControls() {
      const playBtn = document.getElementById('timeline-play-btn');
      const slider = document.getElementById('timeline-slider');
      let isPlaying = false;
      let playInterval;
      
      playBtn.addEventListener('click', function() {
        isPlaying = !isPlaying;
        
        if (isPlaying) {
          playBtn.innerHTML = '<i class="fas fa-pause"></i>';
          
          // Avançar slider automaticamente
          playInterval = setInterval(() => {
            if (slider.value < slider.max) {
              slider.value++;
              slider.dispatchEvent(new Event('input'));
            } else {
              slider.value = slider.min;
              slider.dispatchEvent(new Event('input'));
            }
          }, 1000);
        } else {
          playBtn.innerHTML = '<i class="fas fa-play"></i>';
          clearInterval(playInterval);
        }
      });
      
      slider.addEventListener('input', function() {
        // Atualizar mapa com dados históricos (simulado)
        const month = parseInt(this.value);
        const year = 2023;
        showNotification(`Carregando dados de ${getMonthName(month)}/${year}`, 'success');
      });
    }
    
    function getMonthName(month) {
      const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                     'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
      return months[month - 1];
    }

    // Configurar event listeners
    function setupEventListeners() {
      // Filtro de biomas
      document.getElementById('biome-select').addEventListener('change', function() {
        if (this.value === 'all') {
          map.flyTo([-10, -55], 4);
          document.getElementById('biome-title').textContent = "Todos os Biomas";
          document.getElementById('biome-title').style.backgroundColor = "var(--primary)";
          document.getElementById('biome-description').textContent = "Visualizando todos os biomas brasileiros";
          document.getElementById('biome-stats').innerHTML = "";
        } else {
          const biome = biomesData[this.value];
          map.flyTo(biome.center, biome.zoom);
          showBiomeInfo(this.value);
        }
        
        updateVisibleSatellites();
        
        // Atualizar mapa de calor se estiver ativo
        if (heatmapLayer) {
          updateHeatmap(this.value);
        }
      });

      // Filtro de satélites
      document.getElementById('satellite-select').addEventListener('change', updateVisibleSatellites);
      
      // Botão de tela cheia
      document.getElementById('fullscreen-btn').addEventListener('click', function() {
        const container = document.getElementById('map-container');
        
        if (!document.fullscreenElement) {
          container.requestFullscreen().catch(err => {
            console.error(`Erro ao tentar entrar em tela cheia: ${err.message}`);
            showNotification('Erro ao ativar tela cheia', 'error');
          });
        } else {
          document.exitFullscreen();
        }
      });
      
      // Botão de atualização
      document.getElementById('refresh-btn').addEventListener('click', updateSatellites);
      
      // Botão de mapa de calor
      document.getElementById('heatmap-btn').addEventListener('click', toggleHeatmap);
      
      // Botão de rastrear satélite
      document.getElementById('track-satellite-btn').addEventListener('click', trackSatellite);
      
      // Fechar painel de informações do satélite
      document.querySelector('.satellite-info-panel').addEventListener('click', function(e) {
        if (e.target === this) {
          this.style.display = 'none';
          trackedSatellite = null;
          satelliteTracksLayer.clearLayers();
        }
      });
      
      // Fechar alerta de incêndios
      document.querySelector('.alert-close').addEventListener('click', function() {
        this.parentElement.style.display = 'none';
      });
      
      // Eventos de tela cheia
      document.addEventListener('fullscreenchange', function() {
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        if (document.fullscreenElement) {
          fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i> Sair da Tela Cheia';
        } else {
          fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i> Tela Cheia';
        }
      });
    }

    // Inicialização da aplicação
    document.addEventListener('DOMContentLoaded', function() {
      // Atualizar ano no footer
      document.getElementById('current-year').textContent = new Date().getFullYear();
      
      // Configurar mapa e dados
      addBiomesToMap();
      updateSatellites();
      
      // Configurar gráficos
      initCharts();
      
      // Configurar abas
      setupTabs();
      
      // Configurar controles da linha do tempo
      setupTimelineControls();
      
      // Configurar event listeners
      setupEventListeners();
      
      // Atualizar satélites a cada 2 minutos
      setInterval(updateSatellites, 120000);
      
      // Mostrar notificação de boas-vindas
      setTimeout(() => {
        showNotification('Bem-vindo ao GeoVision Brasil! Carregando dados em tempo real...', 'success');
      }, 1000);
    });
  </script>
</body>
</html>
